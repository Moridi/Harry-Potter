package service;

import java.io.BufferedReader;
import java.io.FileReader;
import java.util.Vector;

import entities.*;

public class PersonService {
	
	private Person person;//The Person the services are performed on/at
	
	private Vector<Person> allPersons; //All the persons in the system
	
	public Person getPerson() {
		return person;
	}

	public void setPerson(Person _person) {
		person = _person;
	}

	public Vector<Person> getAllPersons() {
		return allPersons;
	}

	public void setAllPersons(Vector<Person> _allPersons) {
		allPersons = _allPersons;
	}

	public PersonService(Person person) {
		this.person = person;
		allPersons = new Vector<Person>();
	}

	public void getData(String fileName) /* implement this method such that you will
	receive the file name (PersonDB.txt) as an input and inside the method you
	will open that file, read it and will fill up the information for each person (fill the
	vector)*/
	{
        FileReader freader = new FileReader(fileName);  
        BufferedReader br = new BufferedReader(freader);  
        String s;  
        while((s = br.readLine()) != null) {
        	if(s.equals("$")){
        		break;
        	}
        	String courseName = s;
        	
        	String _minGrade = br.readLine();
        	Grade minGrade = Grade.valueOf(_minGrade);
        	
        	String professorName = br.readLine();
        	Professor professor = new Professor(professorName);
        	
        	String _year = br.readLine();
        	int year = Integer.parseInt(_year); 
        			
        	String numberOfStudents = br.readLine();
        	int numOfStudents = Integer.parseInt(numberOfStudents);
        	
        	Vector<Student> students = new Vector<Student>();
        	
        	for(int i = 0; i < numOfStudents; i++){
        		String studentName = br.readLine();
        		students.add(new Student(studentName));    		
        	}
        	
        	Course newCourse = new Course(courseName, professor, minGrade, year);
        	
        	newCourse.setStudentNames(students);
        	
        	allCourses.add(newCourse);
        		    
        	s = br.readLine();	
        }  
        freader.close(); 
	}
	
	public void setData()
	/* implement this method so you can fill
	your database using the vector of persons you have */
	{
		
	}
}
